# Listen on the default port (3128). Adjust as needed.
http_port 3128

# Define who is allowed to use this proxy -- "localnet" is your Docker subnet
# Adjust the subnet to match your Docker network (e.g. 172.19.0.0/16).
acl localnet src 172.19.0.0/16

# Typical ACLs for SSL and safe ports (helps prevent weird port usage).
acl SSL_ports port 443
acl Safe_ports port 80
acl Safe_ports port 443
acl CONNECT method CONNECT

# Define the set of allowed domains. These examples cover GitHubâ€™s main domains:
# Adjust or expand for your needs (e.g. raw.githubusercontent.com, api.github.com, etc.).
acl AllowedSites dstdomain .github.com .githubusercontent.com .githubassets.com .githubapp.com

# 1) Only allow requests *from* localnet
http_access deny !localnet

# 2) Allow requests *to* the AllowedSites (which are in .github.com, .githubusercontent.com, etc.)
http_access allow localnet AllowedSites

# 3) Deny everything else
http_access deny all

# Logging options (defaults are fine, but you can configure as needed)
cache_log /var/log/squid/cache.log
access_log /var/log/squid/access.log
